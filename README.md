## Telegram Weather Bot

Телеграм-бот, который позволяет получать прогноз погоды на сегодня и завтра по названию города с использованием OpenWeatherMap API. Бот сохраняет историю запросов для каждого пользователя.

---

## Основные функции

- Получение прогноза погоды на выбранный день (сегодня или завтра).
- История запросов погоды с возможностью просмотра всех городов, для которых пользователь запрашивал прогноз.
- Удобный интерфейс с кнопками для выбора даты.
- Поддержка русского языка.

---

## Установка и настройка

1. **Установите зависимости:**

   ```
   pip install pytelegrambotapi peewee requests
   ```

2. **Получите необходимые ключи:**

   - API ключ OpenWeatherMap: https://openweathermap.org/api
   - Токен Telegram-бота: создайте бота через @BotFather в Telegram

3. **Создайте файл `config.py` с содержимым:**

   ```
   OPENWEATHER_API_KEY = 'ваш_openweathermap_api_ключ'
   TELEGRAM_BOT_TOKEN = 'ваш_telegram_токен'
   ```

4. **Инициализируйте базу данных:**

   В файле с моделью базы данных (`database.py`) вызовите функцию `initialize_db()` при первом запуске для создания необходимых таблиц.

---

## Запуск бота

```
import telebot
from handlers import register_handlers
from config import TELEGRAM_BOT_TOKEN

bot = telebot.TeleBot(TELEGRAM_BOT_TOKEN)
register_handlers(bot)
bot.polling()
```

---

## Использование

- `/start` — начать взаимодействие с ботом, введите название города.
- После отправки названия города бот предложит выбрать день прогноза (Сегодня/Завтра).
- Бот вернёт подробный прогноз с температурой, ощущаемой температурой, описанием и скоростью ветра.
- `/history` — получить список городов, для которых Вы уже запрашивали погоду.
- `/help` — получить справку по командам.

---

## Структура проекта

- `bot.py` — точка входа, запуск бота.
- `handlers.py` — обработчики сообщений и команд Telegram.
- `weather_api.py` — функция получения прогноза через OpenWeatherMap.
- `database.py` — модель `History` и функции работы с базой данных.
- `config.py` — конфигурация (API ключи и токен бота).

---

## Технические детали

- Используется база данных SQLite с библиотекой `peewee`.
- Хранение истории запросов с информацией о городе, дне, температуре и времени запроса.
- Прогноз погоды запрашивается по координатам города через API OpenWeatherMap.
- Интерфейс бота построен на `pytelegrambotapi`.
- Время запроса прогноза выбирается ближайшее к 12:00 выбранного дня.

---

## Лицензия

Данный проект предоставляется "как есть" без каких-либо гарантий. Используйте на свой страх и риск.


