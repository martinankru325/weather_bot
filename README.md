# Telegram Weather Bot

Телеграм-бот для получения прогноза погоды на сегодня и завтра по названию города с использованием OpenWeatherMap API. Ведет историю запросов пользователей.

---

## Возможности

- Получение прогноза погоды для выбранного города на сегодня и завтра.
- Просмотр истории запросов — список городов, для которых пользователь запрашивал погоду.
- Удобное меню с кнопками для выбора даты прогноза.
- Все ответы на русском языке.

---

## Установка и запуск

1. Установите необходимые библиотеки:

   ```
   pip install pytelegrambotapi peewee requests
   ```

2. Получите API-ключи:

   - OpenWeatherMap API ключ: https://openweathermap.org/api
   - Токен Telegram-бота через @BotFather

3. Создайте файл `config.py` со следующим содержимым:

   ```
   TELEGRAM_TOKEN = 'ваш_токен_телеграм_бота'
   OPENWEATHER_API_KEY = 'ваш_api_ключ_openweathermap'
   ```

4. Запустите бота:

   ```
   python bot.py
   ```

   При первом запуске автоматически создастся база данных и таблицы.

---

## Структура проекта

- `bot.py` — точка входа, инициализация бота и базы данных, запуск процесса обработки сообщений.
- `handlers.py` — регистрация обработчиков команд и сообщений Telegram.
- `database.py` — описание моделей базы данных и функция `initialize_db`.
- `weather_api.py` — функция получения прогноза с OpenWeatherMap.
- `config.py` — хранит токены и ключи API.

---

## Использование бота

- Отправьте команду `/start`, чтобы начать.
- Введите название города.
- Выберите день прогноза (Сегодня или Завтра) через inline-кнопки.
- Получите прогноз с температурой, ощущаемой температурой, описанием погоды и скоростью ветра.
- Отправьте команду `/history`, чтобы увидеть список городов из вашей истории запросов.
- Команда `/help` выводит справку по командам.

---

## Примечания

- База данных SQLite (`weather_bot.db`) создаётся автоматически при первом запуске.
- История запросов сохраняется с датой и временем.
- Прогнозы берутся из OpenWeatherMap с интервалом 3 часа, выбирается ближайший к 12:00.

---

## Лицензия

Проект предоставляется "как есть" без гарантий. Используйте по своему усмотрению.
```

добавть в структуру requirements. txt

```markdown
# Telegram Weather Bot

Телеграм-бот для получения прогноза погоды на сегодня и завтра по названию города с использованием OpenWeatherMap API. Ведет историю запросов пользователей.

---

## Возможности

- Получение прогноза погоды для выбранного города на сегодня и завтра.
- Просмотр истории запросов — список городов, для которых пользователь запрашивал погоду.
- Удобное меню с кнопками для выбора даты прогноза.
- Все ответы на русском языке.

---

## Установка и запуск

1. Установите необходимые библиотеки:

   ```
   pip install -r requirements.txt
   ```

2. Получите API-ключи:

   - OpenWeatherMap API ключ: https://openweathermap.org/api
   - Токен Telegram-бота через @BotFather

3. Создайте файл `config.py` со следующим содержимым:

   ```
   TELEGRAM_TOKEN = 'ваш_токен_телеграм_бота'
   OPENWEATHER_API_KEY = 'ваш_api_ключ_openweathermap'
   ```

4. Запустите бота:

   ```
   python bot.py
   ```

   При первом запуске автоматически создастся база данных и таблицы.

---

## Структура проекта

- `bot.py` — точка входа, инициализация бота и базы данных, запуск процесса обработки сообщений.
- `handlers.py` — регистрация обработчиков команд и сообщений Telegram.
- `database.py` — описание моделей базы данных и функция `initialize_db`.
- `weather_api.py` — функция получения прогноза с OpenWeatherMap.
- `config.py` — хранит токены и ключи API.
- `requirements.txt` — список зависимостей проекта.

---

## Использование бота

- Отправьте команду `/start`, чтобы начать.
- Введите название города.
- Выберите день прогноза (Сегодня или Завтра) через inline-кнопки.
- Получите прогноз с температурой, ощущаемой температурой, описанием погоды и скоростью ветра.
- Отправьте команду `/history`, чтобы увидеть список городов из вашей истории запросов.
- Команда `/help` выводит справку по командам.

---

## Примечания

- База данных SQLite (`weather_bot.db`) создаётся автоматически при первом запуске.
- История запросов сохраняется с датой и временем.
- Прогнозы берутся из OpenWeatherMap с интервалом 3 часа, выбирается ближайший к 12:00.

---

## Лицензия

Проект предоставляется "как есть" без гарантий. Используйте по своему усмотрению.
```

